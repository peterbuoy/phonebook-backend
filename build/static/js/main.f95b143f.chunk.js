(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var c=t(2),s=t.n(c),r=t(18),a=t.n(r),o=t(19),i=t(3),u=t(5),l=t.n(u),d="api/persons",m={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e)},remove:function(e){return l.a.delete("".concat(d,"/").concat(e))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n)}},b=t(0),j=function(e){var n,t=e.message;return n="error"===e.messageType?{color:"red",fontStyle:"bold",borderRadius:"5px",fontSize:"2em",border:"0.2em dashed red"}:{color:"green",fontStyle:"italic",borderRadius:"5px",fontSize:"2em",border:"0.2em solid green"},null===t?null:Object(b.jsx)("div",{style:n,className:"notification",children:t})},f=function(e){var n=e.handleAddPerson,t=e.handleNewName,c=e.handleNewNumber;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Add New"}),Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:t})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{onChange:c})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})]})},h=function(e){var n=e.persons,t=e.filter,c=e.handleDelete,s=n.filter((function(e){return e.name.toLowerCase().includes("".concat(t.toLowerCase()))}));return Object(b.jsx)("div",{children:s.map((function(e){return Object(b.jsxs)("div",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(){return c(e.name,e.id)},children:"delete"})]},e.id)}))})},p=function(e){var n=e.handleNewFilter;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{onChange:n})]})},g=function(){var e=Object(c.useState)({message:null,messageType:null}),n=Object(i.a)(e,2),t=n[0],s=n[1],r=Object(c.useState)(""),a=Object(i.a)(r,2),u=a[0],l=a[1],d=Object(c.useState)([]),g=Object(i.a)(d,2),O=g[0],x=g[1],v=Object(c.useState)(""),y=Object(i.a)(v,2),w=y[0],T=y[1],N=Object(c.useState)(""),S=Object(i.a)(N,2),k=S[0],A=S[1];Object(c.useEffect)((function(){m.getAll().then((function(e){x(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(j,{message:t.message,messageType:t.messageType}),Object(b.jsx)(p,{handleNewFilter:function(e){l(e.target.value)}}),Object(b.jsx)(f,{handleAddPerson:function(e){e.preventDefault();var n=!O.some((function(e){return e.name===w})),t={name:"".concat(w),number:"".concat(k)};if(n)m.create(t).then((function(e){x(O.concat(e.data)),s({message:"Added ".concat(w),messageType:"success"}),setTimeout((function(){s({message:null,messageType:null})}),4e3)})).catch((function(e){s({message:"".concat(e.response.data.error),messageType:"error"}),console.log(e.response.data),setTimeout((function(){s({message:null,messageType:null})}),4e3)}));else if(window.confirm("".concat(w," is already added to phonebook, replace the old number with new one?"))){var c=O.find((function(e){return e.name===w})).id;m.update(c,t).then((function(){var e=Object(o.a)(O);e[O.findIndex((function(e){return e.name===w}))].number=k,x(e),s({message:"Updated ".concat(w),messageType:"success"}),setTimeout((function(){s({message:null,messageType:null})}),4e3)})).catch((function(e){s({message:"Oops, ".concat(w," has already been deleted"),messageType:"error"}),setTimeout((function(){s({message:null,messageType:null})}),4e3),x(O.filter((function(e){return e.name!==w})))}))}},handleNewNumber:function(e){A(e.target.value)},handleNewName:function(e){T(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(h,{persons:O,filter:u,handleDelete:function(e,n){window.confirm("Are you sure you want to delete ".concat(e))&&m.remove(n).then(x(O.filter((function(e){return e.id!==n})))).catch((function(e){console.log(e)}))}})]})};a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.f95b143f.chunk.js.map