(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),o=t(18),a=t.n(o),s=t(19),i=t(3),u=t(5),l=t.n(u),d="https://pure-lowlands-40590.herokuapp.com/api/persons",b={getAll:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e)},remove:function(e){return l.a.delete("".concat(d,"/").concat(e))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n)}},j=t(0),m=function(e){var n,t=e.message;return n="error"===e.messageType?{color:"red",fontStyle:"bold",borderRadius:"5px",fontSize:"2em",border:"0.2em dashed red"}:{color:"green",fontStyle:"italic",borderRadius:"5px",fontSize:"2em",border:"0.2em solid green"},null===t?null:Object(j.jsx)("div",{style:n,className:"notification",children:t})},f=function(e){var n=e.handleAddPerson,t=e.handleNewName,c=e.handleNewNumber;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Add New"}),Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{onChange:t})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{onChange:c})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})]})},h=function(e){var n=e.persons,t=e.filter,c=e.handleDelete,r=n.filter((function(e){return e.name.toLowerCase().includes("".concat(t.toLowerCase()))}));return Object(j.jsx)("div",{children:r.map((function(e){return Object(j.jsxs)("div",{children:[e.name," ",e.number," ",Object(j.jsx)("button",{onClick:function(){return c(e.name,e.id)},children:"delete"})]},e.id)}))})},p=function(e){var n=e.handleNewFilter;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{onChange:n})]})},O=function(){var e=Object(c.useState)({message:null,messageType:null}),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(i.a)(o,2),u=a[0],l=a[1],d=Object(c.useState)([]),O=Object(i.a)(d,2),g=O[0],x=O[1],v=Object(c.useState)(""),w=Object(i.a)(v,2),y=w[0],N=w[1],T=Object(c.useState)(""),S=Object(i.a)(T,2),k=S[0],A=S[1];Object(c.useEffect)((function(){b.getAll().then((function(e){x(e)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(m,{message:t.message,messageType:t.messageType}),Object(j.jsx)(p,{handleNewFilter:function(e){l(e.target.value)}}),Object(j.jsx)(f,{handleAddPerson:function(e){e.preventDefault();var n=!g.some((function(e){return e.name===y})),t={name:"".concat(y),number:"".concat(k)};if(n)b.create(t).then((function(e){x(g.concat(e.data)),r({message:"Added ".concat(y),messageType:"success"}),setTimeout((function(){r({message:null,messageType:null})}),4e3)})).catch((function(e){return console.log(e)}));else if(window.confirm("".concat(y," is already added to phonebook, replace the old number with new one?"))){var c=g.find((function(e){return e.name===y})).id;b.update(c,t).then((function(){var e=Object(s.a)(g);e[g.findIndex((function(e){return e.name===y}))].number=k,x(e),r({message:"Updated ".concat(y),messageType:"success"}),setTimeout((function(){r({message:null,messageType:null})}),4e3)})).catch((function(e){r({message:"Oops, ".concat(y," has already been deleted"),messageType:"error"}),setTimeout((function(){r({message:null,messageType:null})}),4e3),x(g.filter((function(e){return e.name!==y})))}))}},handleNewNumber:function(e){A(e.target.value)},handleNewName:function(e){N(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(h,{persons:g,filter:u,handleDelete:function(e,n){window.confirm("Are you sure you want to delete ".concat(e))&&b.remove(n).then(x(g.filter((function(e){return e.id!==n})))).catch((function(e){console.log(e)}))}})]})};a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(O,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.196dbe54.chunk.js.map